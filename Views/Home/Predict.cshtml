@{
    ViewData["Title"] = "Predict";
}
@model Prediction

<div class="text-center">
    <h1 class="display-4">Fag el-Gamous</h1>
    <h3>Predict the Burial Wrapping State</h3>
</div>

<form method="post" asp-controller="Inference" asp-action="Score">
    <div class="form-group">
        <label for="burialnumber">Burial Number</label>
        <input type="number" id="burialnumber" name="burialnumber" class="form-control" />
    </div>
    <div class="form-group">
        <label for="squarenorthsouth">Square NorthSouth</label>
        <input type="number" id="squarenorthsouth" name="squarenorthsouth" class="form-control"/>
    </div>
    <div class="form-group">
        <label for="squareeastwest">Square EastWest</label>
        <input type="number" id="squareeastwest" name="squareeastwest" class="form-control" />
    </div>
    <div class="form-group">
        <label for="depth">Depth</label>
        <input type="number" step="0.01" id="depth" name="depth" class="form-control" />
    </div>
    <div class="form-group">
        <label for="southtohead">South to Head</label>
        <input type="number" step="0.01" id="southtohead" name="southtohead" class="form-control" />
    </div>
    <div class="form-group">
        <label for="westtohead">West to Head</label>
        <input type="number" step="0.01" id="westtohead" name="westtohead" class="form-control" />
    </div>
    <div class="form-group">
        <label for="southtofeet">South to Feet</label>
        <input type="number" step="0.01" id="southtofeet" name="southtofeet" class="form-control" />
    </div>
    <div class="form-group">
        <label for="westtofeet">West to Feet</label>
        <input type="number" step="0.01" id="westtofeet" name="westtofeet" class="form-control" />
    </div>
    <div class="form-group">
        <label for="northsouth">North/South</label>
        <select id="northsouth" name="northsouth" class="form-control">
            <option value="N">N</option>
            <option value="S">S</option>
        </select>
    </div>
    <div class="form-group">
        <label for="eastwest">East/West</label>
        <select id="eastwest" name="eastwest"class="form-control">
            <option value="E">E</option>
            <option value="W">W</option>
        </select>
    </div>
    <div class="form-group">
        <label for="adultsubadult">AdultSubAdult</label>
        <select id="adultsubadult" name="adultsubadult" class="form-control">
            <option value="A">A</option>
            <option value="C">C</option>
        </select>
    </div>
    <div class="form-group">
        <label for="samplescollected">Samples Collected</label>
        <select id="samplescollected" name="samplescollected" class="form-control">
            <option value="true">True</option>
            <option value="false">False</option>
            <option value="unknown">Unknown</option>
        </select>
    </div>
    <div class="form-group">
        <label for="area">Area</label>
        <select id="area" name="area" class="form-control">
            <option value="NE">NE</option>
            <option value="NW">NW</option>
            <option value="SE">SE</option>
            <option value="SW">SW</option>
        </select>
    </div>
    <div class="form-group">
        <label for="ageatdeath">Age at Death</label>
        <select id="ageatdeath" name="ageatdeath" class="form-control">
            <option value="A">A</option>
            <option value="C">C</option>
            <option value="I">I</option>
            <option value="N">N</option>
        </select>
    </div><br />
    <div class="float-right">
        <button class="btn btn-primary" onclick="sendJSON()">Predict</button>
    </div>
</form>


<script>
    function sendJSON() {
        let dictionaryForm = {};

        var burialnumber = document.getElementById("burialnumber").value;
        var depth = document.getElementById("depth").value;
        var squarenorthsouth = document.getElementById("squarenorthsouth").value;
        var squareeastwest = document.getElementById("squareeastwest").value;
        var southtohead = document.getElementById("southtohead").value;
        var westtohead = document.getElementById("westtohead").value;
        var southtofeet = document.getElementById("southtofeet").value;
        var westtofeet = document.getElementById("westtofeet").value;
        var northsouth = document.getElementById("northsouth").value;
        var eastwest = document.getElementById("eastwest").value;
        var adultsubadult = document.getElementById("adultsubadult").value;
        var samplescollected = document.getElementById("samplescollected").value;
        var area = document.getElementById("area").value;
        var ageatdeath = document.getElementById("ageatdeath").value;


        dictionaryForm.burialnumber = burialnumber || 0;
        dictionaryForm.depth = depth || 0;
        dictionaryForm.squarenorthsouth = squarenorthsouth || 0;
        distionaryForm.squareeastwest = squareeastwest || 0;
        dictionaryForm.southtohead = southtohead || 0;
        dictionaryForm.westtohead = westtohead || 0;
        dictionaryForm.southtofeet = southtofeet || 0;
        dictionaryForm.westtofeet = westtofeet || 0;
        dictionaryForm.northsouth_N = northsouth=="N" ? 1 : 0;
        dictionaryForm.eastwest_E = eastwest == "E" ? 1 : 0;
        dictioanryForm.eastwest_W = eastwest == "W" ? 1 : 0;
        dictionaryForm.adultsubadult_A = adultsubadult == "A" ? 1 : 0;
        dictionaryForm.adultsubadult_C = adultsubadult == "C" ? 1 : 0;
        dictionaryForm.samplescollected_false = samplescollected == "false" ? 1 : 0;
        dictionaryForm.samplescollected_true = samplescollected == "true" ? 1 : 0;
        dictionaryForm.samplescollected_unknown = samplescollected == "unknown" ? 1 : 0;
        dictionaryForm.area_NE = area == "NE" ? 1 : 0;
        dictionaryForm.area_NW = area == "NW" ? 1 : 0;
        dictionaryForm.area_SE = area == "SE" ? 1 : 0;
        dictionaryForm.area_SW = area == "SW" ? 1 : 0;
        dictionaryForm.ageatdeath_A = ageatdeath == "A" ? 1 : 0;
        dictionaryForm.ageatdeath_C = ageatdeath == "C" ? 1 : 0;
        dictionaryForm.ageatdeath_I = ageatdeath == "I" ? 1 : 0;
        dictionaryForm.ageatdeath_N = ageatdeath == "N" ? 1 : 0;

        const jsonRequest = JSON.stringify(dictionaryForm);

        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        var requestOptions = {
            method: "POST",
            headers: myHeaders,
            body: jsonRequest,
            redirect: "follow",
        };

        const response = await fetch(
            "https://localhost:7138/score",
            requestOptions
        );

        //const data = await response.json();

        //prediction = data.PredictedWrap;

        //document.getElementById("prediction").innerHTML = prediction;
    }
</script>